# Pentest-Style Scenario Set

This scenario set is intended for repeatable pre-release security checks in staging.

## Scenario 1: IDOR on contact status update

Goal:
- Confirm attacker cannot update another user's contact status.

Expected:
- HTTP 403 or equivalent deny response.
- Contact record remains unchanged.

Automation:
- `tests/Feature/SecurityPentestScenarioTest.php::test_idor_attempt_on_contact_status_update_is_blocked`

## Scenario 2: Privilege escalation on application status

Goal:
- Confirm non-team users cannot approve/reject applications.

Expected:
- HTTP 403.
- Application status remains `pending`.

Automation:
- `tests/Feature/SecurityPentestScenarioTest.php::test_privilege_escalation_attempt_for_application_status_is_blocked`

## Scenario 3: IDOR on media delete

Goal:
- Confirm a user cannot delete media owned by another user.

Expected:
- HTTP 403.
- Media record remains in database.

Automation:
- `tests/Feature/SecurityPentestScenarioTest.php::test_media_delete_idor_attempt_is_blocked`

## Scenario 4: Malformed payload robustness

Goal:
- Confirm malformed payloads produce validation errors, not server errors.

Expected:
- HTTP 422 validation response.
- No 5xx returned.

Automation:
- `tests/Feature/SecurityPentestScenarioTest.php::test_malformed_payload_returns_validation_error_not_server_error`

## Run Command

```bash
php artisan test --filter=SecurityPentestScenarioTest
```
